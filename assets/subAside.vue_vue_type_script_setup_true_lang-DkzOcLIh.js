import{C as Fe,D as We,_ as ue,u as N,w as ke,E as S,F as ee,G as je,H as me,T as Ve,p as Me,I as qe,J as Ge,K as Oe,L as Ee,N as Z,O as Ue,v as Se,r as oe,P as Je,B as ye}from"./base-CS5B-nuS.js";import{t as te,E as Pe}from"./index-BfU83LGz.js";import{j as xe,d as O,$ as V,o as k,a0 as F,i as z,M as Ne,a4 as Ke,u as _,V as Be,g as b,B as se,r as E,D as Ie,z as ne,S as he,N as Ce,x as _e,y as $e,h as x,l as q,H as He,I as Xe,F as ie,a5 as Ze,w as Qe,E as Ye,X as et,c as Q,b as Y,n as ae,f as tt,t as ge,e as nt}from"./index-DkfhIiUi.js";import{t as le,m as ot}from"./typescript-QNWfR3u7.js";import{f as st}from"./vnode-DaWnQ_iA.js";const H=new Map;if(We){let e;document.addEventListener("mousedown",n=>e=n),document.addEventListener("mouseup",n=>{if(e){for(const s of H.values())for(const{documentHandler:o}of s)o(n,e);e=void 0}})}function we(e,n){let s=[];return xe(n.arg)?s=n.arg:Fe(n.arg)&&s.push(n.arg),function(o,t){const p=n.instance.popperRef,d=o.target,c=t==null?void 0:t.target,i=!n||!n.instance,m=!d||!c,f=e.contains(d)||e.contains(c),M=e===d,v=s.length&&s.some(T=>T==null?void 0:T.contains(d))||s.length&&s.includes(c),C=p&&(p.contains(d)||p.contains(c));i||m||f||M||v||C||n.value(o,t)}}const at={beforeMount(e,n){H.has(e)||H.set(e,[]),H.get(e).push({documentHandler:we(e,n),bindingFn:n.value})},updated(e,n){H.has(e)||H.set(e,[]);const s=H.get(e),o=s.findIndex(p=>p.bindingFn===n.oldValue),t={documentHandler:we(e,n),bindingFn:n.value};o>=0?s.splice(o,1,t):s.push(t)},unmounted(e){H.delete(e)}},lt=O({name:"ElCollapseTransition"}),ut=O({...lt,setup(e){const n=N("collapse-transition"),s=t=>{t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom},o={beforeEnter(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height&&(t.dataset.elExistsHeight=t.style.height),t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter(t){requestAnimationFrame(()=>{t.dataset.oldOverflow=t.style.overflow,t.dataset.elExistsHeight?t.style.maxHeight=t.dataset.elExistsHeight:t.scrollHeight!==0?t.style.maxHeight=`${t.scrollHeight}px`:t.style.maxHeight=0,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom,t.style.overflow="hidden"})},afterEnter(t){t.style.maxHeight="",t.style.overflow=t.dataset.oldOverflow},enterCancelled(t){s(t)},beforeLeave(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.maxHeight=`${t.scrollHeight}px`,t.style.overflow="hidden"},leave(t){t.scrollHeight!==0&&(t.style.maxHeight=0,t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave(t){s(t)},leaveCancelled(t){s(t)}};return(t,p)=>(k(),V(Be,Ne({name:_(n).b()},Ke(o)),{default:F(()=>[z(t.$slots,"default")]),_:3},16,["name"]))}});var it=ue(ut,[["__file","collapse-transition.vue"]]);const rt=ke(it);let ct=class{constructor(n,s){this.parent=n,this.domNode=s,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,s=>{s.addEventListener("keydown",o=>{let t=!1;switch(o.code){case S.down:{this.gotoSubIndex(this.subIndex+1),t=!0;break}case S.up:{this.gotoSubIndex(this.subIndex-1),t=!0;break}case S.tab:{te(n,"mouseleave");break}case S.enter:case S.numpadEnter:case S.space:{t=!0,o.currentTarget.click();break}}return t&&(o.preventDefault(),o.stopPropagation()),!1})})}},dt=class{constructor(n,s){this.domNode=n,this.submenu=null,this.submenu=null,this.init(s)}init(n){this.domNode.setAttribute("tabindex","0");const s=this.domNode.querySelector(`.${n}-menu`);s&&(this.submenu=new ct(this,s)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let s=!1;switch(n.code){case S.down:{te(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),s=!0;break}case S.up:{te(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),s=!0;break}case S.tab:{te(n.currentTarget,"mouseleave");break}case S.enter:case S.numpadEnter:case S.space:{s=!0,n.currentTarget.click();break}}s&&n.preventDefault()})}},pt=class{constructor(n,s){this.domNode=n,this.init(s)}init(n){const s=this.domNode.childNodes;Array.from(s).forEach(o=>{o.nodeType===1&&new dt(o,n)})}};const mt=O({name:"ElMenuCollapseTransition"}),vt=O({...mt,setup(e){const n=N("menu"),s={onBeforeEnter:o=>o.style.opacity="0.2",onEnter(o,t){ee(o,`${n.namespace.value}-opacity-transition`),o.style.opacity="1",t()},onAfterEnter(o){me(o,`${n.namespace.value}-opacity-transition`),o.style.opacity=""},onBeforeLeave(o){o.dataset||(o.dataset={}),je(o,n.m("collapse"))?(me(o,n.m("collapse")),o.dataset.oldOverflow=o.style.overflow,o.dataset.scrollWidth=o.clientWidth.toString(),ee(o,n.m("collapse"))):(ee(o,n.m("collapse")),o.dataset.oldOverflow=o.style.overflow,o.dataset.scrollWidth=o.clientWidth.toString(),me(o,n.m("collapse"))),o.style.width=`${o.scrollWidth}px`,o.style.overflow="hidden"},onLeave(o){ee(o,"horizontal-collapse-transition"),o.style.width=`${o.dataset.scrollWidth}px`}};return(o,t)=>(k(),V(Be,Ne({mode:"out-in"},_(s)),{default:F(()=>[z(o.$slots,"default")]),_:3},16))}});var ft=ue(vt,[["__file","menu-collapse-transition.vue"]]);function ze(e,n){const s=b(()=>{let t=e.parent;const p=[n.value];for(;t.type.name!=="ElMenu";)t.props.index&&p.unshift(t.props.index),t=t.parent;return p});return{parentMenu:b(()=>{let t=e.parent;for(;t&&!["ElMenu","ElSubMenu"].includes(t.type.name);)t=t.parent;return t}),indexPath:s}}function ht(e){return b(()=>{const s=e.backgroundColor;return s?new Ve(s).shade(20).toString():""})}const Le=(e,n)=>{const s=N("menu");return b(()=>s.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":ht(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},gt=Me({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Z},expandOpenIcon:{type:Z},collapseCloseIcon:{type:Z},collapseOpenIcon:{type:Z}}),ve="ElSubMenu";var Te=O({name:ve,props:gt,setup(e,{slots:n,expose:s}){const o=Ce(),{indexPath:t,parentMenu:p}=ze(o,b(()=>e.index)),d=N("menu"),c=N("sub-menu"),i=se("rootMenu");i||le(ve,"can not inject root menu");const m=se(`subMenu:${p.value.uid}`);m||le(ve,"can not inject sub menu");const f=E({}),M=E({});let v;const C=E(!1),T=E(),G=E(),L=b(()=>D.value==="horizontal"&&A.value?"bottom-start":"right-start"),W=b(()=>D.value==="horizontal"&&A.value||D.value==="vertical"&&!i.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?P.value?e.expandOpenIcon:e.expandCloseIcon:qe:e.collapseCloseIcon&&e.collapseOpenIcon?P.value?e.collapseOpenIcon:e.collapseCloseIcon:Ge),A=b(()=>m.level===0),U=b(()=>{const u=e.teleported;return u===void 0?A.value:u}),re=b(()=>i.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),ce=b(()=>D.value==="horizontal"&&A.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),P=b(()=>i.openedMenus.includes(e.index)),j=b(()=>[...Object.values(f.value),...Object.values(M.value)].some(({active:u})=>u)),D=b(()=>i.props.mode),de=b(()=>i.props.persistent),R=Ie({index:e.index,indexPath:t,active:j}),J=Le(i.props,m.level+1),K=b(()=>{var u;return(u=e.popperOffset)!=null?u:i.props.popperOffset}),X=b(()=>{var u;return(u=e.popperClass)!=null?u:i.props.popperClass}),pe=b(()=>{var u;return(u=e.showTimeout)!=null?u:i.props.showTimeout}),a=b(()=>{var u;return(u=e.hideTimeout)!=null?u:i.props.hideTimeout}),l=()=>{var u,I,y;return(y=(I=(u=G.value)==null?void 0:u.popperRef)==null?void 0:I.popperInstanceRef)==null?void 0:y.destroy()},r=u=>{u||l()},h=()=>{i.props.menuTrigger==="hover"&&i.props.mode==="horizontal"||i.props.collapse&&i.props.mode==="vertical"||e.disabled||i.handleSubMenuClick({index:e.index,indexPath:t.value,active:j.value})},g=(u,I=pe.value)=>{var y;if(u.type!=="focus"){if(i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"||e.disabled){m.mouseInChild.value=!0;return}m.mouseInChild.value=!0,v==null||v(),{stop:v}=Ee(()=>{i.openMenu(e.index,t.value)},I),U.value&&((y=p.value.vnode.el)==null||y.dispatchEvent(new MouseEvent("mouseenter")))}},w=(u=!1)=>{var I;if(i.props.menuTrigger==="click"&&i.props.mode==="horizontal"||!i.props.collapse&&i.props.mode==="vertical"){m.mouseInChild.value=!1;return}v==null||v(),m.mouseInChild.value=!1,{stop:v}=Ee(()=>!C.value&&i.closeMenu(e.index,t.value),a.value),U.value&&u&&((I=m.handleMouseleave)==null||I.call(m,!0))};ne(()=>i.props.collapse,u=>r(!!u));{const u=y=>{M.value[y.index]=y},I=y=>{delete M.value[y.index]};he(`subMenu:${o.uid}`,{addSubMenu:u,removeSubMenu:I,handleMouseleave:w,mouseInChild:C,level:m.level+1})}return s({opened:P}),_e(()=>{i.addSubMenu(R),m.addSubMenu(R)}),$e(()=>{m.removeSubMenu(R),i.removeSubMenu(R)}),()=>{var u;const I=[(u=n.title)==null?void 0:u.call(n),x(Oe,{class:c.e("icon-arrow"),style:{transform:P.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&i.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>q(W.value)?x(o.appContext.components[W.value]):x(W.value)})],y=i.isMenuPopup?x(Pe,{ref:G,visible:P.value,effect:"light",pure:!0,offset:K.value,showArrow:!1,persistent:de.value,popperClass:X.value,placement:L.value,teleported:U.value,fallbackPlacements:ce.value,transition:re.value,gpuAcceleration:!1},{content:()=>{var B;return x("div",{class:[d.m(D.value),d.m("popup-container"),X.value],onMouseenter:$=>g($,100),onMouseleave:()=>w(!0),onFocus:$=>g($,100)},[x("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${L.value}`)],style:J.value},[(B=n.default)==null?void 0:B.call(n)])])},default:()=>x("div",{class:c.e("title"),onClick:h},I)}):x(ie,{},[x("div",{class:c.e("title"),ref:T,onClick:h},I),x(rt,{},{default:()=>{var B;return He(x("ul",{role:"menu",class:[d.b(),d.m("inline")],style:J.value},[(B=n.default)==null?void 0:B.call(n)]),[[Xe,P.value]])}})]);return x("li",{class:[c.b(),c.is("active",j.value),c.is("opened",P.value),c.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:P.value,onMouseenter:g,onMouseleave:()=>w(),onFocus:g},[y])}}});const bt=Me({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:oe(Array),default:()=>ot([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Z,default:()=>Je},popperEffect:{type:oe(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),fe=e=>xe(e)&&e.every(n=>q(n)),Mt={close:(e,n)=>q(e)&&fe(n),open:(e,n)=>q(e)&&fe(n),select:(e,n,s,o)=>q(e)&&fe(n)&&Ze(s)&&(o===void 0||o instanceof Promise)};var yt=O({name:"ElMenu",props:bt,emits:Mt,setup(e,{emit:n,slots:s,expose:o}){const t=Ce(),p=t.appContext.config.globalProperties.$router,d=E(),c=N("menu"),i=N("sub-menu"),m=E(-1),f=E(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),M=E(e.defaultActive),v=E({}),C=E({}),T=b(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),G=()=>{const a=M.value&&v.value[M.value];if(!a||e.mode==="horizontal"||e.collapse)return;a.indexPath.forEach(r=>{const h=C.value[r];h&&L(r,h.indexPath)})},L=(a,l)=>{f.value.includes(a)||(e.uniqueOpened&&(f.value=f.value.filter(r=>l.includes(r))),f.value.push(a),n("open",a,l))},W=a=>{const l=f.value.indexOf(a);l!==-1&&f.value.splice(l,1)},A=(a,l)=>{W(a),n("close",a,l)},U=({index:a,indexPath:l})=>{f.value.includes(a)?A(a,l):L(a,l)},re=a=>{(e.mode==="horizontal"||e.collapse)&&(f.value=[]);const{index:l,indexPath:r}=a;if(!(Se(l)||Se(r)))if(e.router&&p){const h=a.route||l,g=p.push(h).then(w=>(w||(M.value=l),w));n("select",l,r,{index:l,indexPath:r,route:h},g)}else M.value=l,n("select",l,r,{index:l,indexPath:r})},ce=a=>{var l;const r=v.value,h=r[a]||M.value&&r[M.value]||r[e.defaultActive];M.value=(l=h==null?void 0:h.index)!=null?l:a},P=a=>{const l=getComputedStyle(a),r=Number.parseInt(l.marginLeft,10),h=Number.parseInt(l.marginRight,10);return a.offsetWidth+r+h||0},j=()=>{var a,l;if(!d.value)return-1;const r=Array.from((l=(a=d.value)==null?void 0:a.childNodes)!=null?l:[]).filter($=>$.nodeName!=="#text"||$.nodeValue),h=64,g=getComputedStyle(d.value),w=Number.parseInt(g.paddingLeft,10),u=Number.parseInt(g.paddingRight,10),I=d.value.clientWidth-w-u;let y=0,B=0;return r.forEach(($,Re)=>{$.nodeName!=="#comment"&&(y+=P($),y<=I-h&&(B=Re+1))}),B===r.length?-1:B},D=a=>C.value[a].indexPath,de=(a,l=33.34)=>{let r;return()=>{r&&clearTimeout(r),r=setTimeout(()=>{a()},l)}};let R=!0;const J=()=>{if(m.value===j())return;const a=()=>{m.value=-1,Ye(()=>{m.value=j()})};R?a():de(a)(),R=!1};ne(()=>e.defaultActive,a=>{v.value[a]||(M.value=""),ce(a)}),ne(()=>e.collapse,a=>{a&&(f.value=[])}),ne(v.value,G);let K;Qe(()=>{e.mode==="horizontal"&&e.ellipsis?K=Ue(d,J).stop:K==null||K()});const X=E(!1);{const a=g=>{C.value[g.index]=g},l=g=>{delete C.value[g.index]};he("rootMenu",Ie({props:e,openedMenus:f,items:v,subMenus:C,activeIndex:M,isMenuPopup:T,addMenuItem:g=>{v.value[g.index]=g},removeMenuItem:g=>{delete v.value[g.index]},addSubMenu:a,removeSubMenu:l,openMenu:L,closeMenu:A,handleMenuItemClick:re,handleSubMenuClick:U})),he(`subMenu:${t.uid}`,{addSubMenu:a,removeSubMenu:l,mouseInChild:X,level:0})}_e(()=>{e.mode==="horizontal"&&new pt(t.vnode.el,c.namespace.value)}),o({open:l=>{const{indexPath:r}=C.value[l];r.forEach(h=>L(h,r))},close:W,handleResize:J});const pe=Le(e,0);return()=>{var a,l;let r=(l=(a=s.default)==null?void 0:a.call(s))!=null?l:[];const h=[];if(e.mode==="horizontal"&&d.value){const u=st(r),I=m.value===-1?u:u.slice(0,m.value),y=m.value===-1?[]:u.slice(m.value);y!=null&&y.length&&e.ellipsis&&(r=I,h.push(x(Te,{index:"sub-menu-more",class:i.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>x(Oe,{class:i.e("icon-more")},{default:()=>x(e.ellipsisIcon)}),default:()=>y})))}const g=e.closeOnClickOutside?[[at,()=>{f.value.length&&(X.value||(f.value.forEach(u=>n("close",u,D(u))),f.value=[]))}]]:[],w=He(x("ul",{key:String(e.collapse),role:"menubar",ref:d,style:pe.value,class:{[c.b()]:!0,[c.m(e.mode)]:!0,[c.m("collapse")]:e.collapse}},[...r,...h]),g);return e.collapseTransition&&e.mode==="vertical"?x(ft,()=>w):w}}});const xt=Me({index:{type:oe([String,null]),default:null},route:{type:oe([String,Object])},disabled:Boolean}),It={click:e=>q(e.index)&&xe(e.indexPath)},be="ElMenuItem",Ct=O({name:be}),_t=O({...Ct,props:xt,emits:It,setup(e,{expose:n,emit:s}){const o=e,t=Ce(),p=se("rootMenu"),d=N("menu"),c=N("menu-item");p||le(be,"can not inject root menu");const{parentMenu:i,indexPath:m}=ze(t,et(o,"index")),f=se(`subMenu:${i.value.uid}`);f||le(be,"can not inject sub menu");const M=b(()=>o.index===p.activeIndex),v=Ie({index:o.index,indexPath:m,active:M}),C=()=>{o.disabled||(p.handleMenuItemClick({index:o.index,indexPath:m.value,route:o.route}),s("click",v))};return _e(()=>{f.addSubMenu(v),p.addMenuItem(v)}),$e(()=>{f.removeSubMenu(v),p.removeMenuItem(v)}),n({parentMenu:i,rootMenu:p,active:M,nsMenu:d,nsMenuItem:c,handleClick:C}),(T,G)=>(k(),Q("li",{class:ae([_(c).b(),_(c).is("active",_(M)),_(c).is("disabled",T.disabled)]),role:"menuitem",tabindex:"-1",onClick:C},[_(i).type.name==="ElMenu"&&_(p).props.collapse&&T.$slots.title?(k(),V(_(Pe),{key:0,effect:_(p).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:_(p).props.persistent},{content:F(()=>[z(T.$slots,"title")]),default:F(()=>[Y("div",{class:ae(_(d).be("tooltip","trigger"))},[z(T.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(k(),Q(ie,{key:1},[z(T.$slots,"default"),z(T.$slots,"title")],64))],2))}});var Ae=ue(_t,[["__file","menu-item.vue"]]);const Tt={title:String},Et=O({name:"ElMenuItemGroup"}),St=O({...Et,props:Tt,setup(e){const n=N("menu-item-group");return(s,o)=>(k(),Q("li",{class:ae(_(n).b())},[Y("div",{class:ae(_(n).e("title"))},[s.$slots.title?z(s.$slots,"title",{key:1}):(k(),Q(ie,{key:0},[tt(ge(s.title),1)],64))],2),Y("ul",null,[z(s.$slots,"default")])],2))}});var De=ue(St,[["__file","menu-item-group.vue"]]);const Dt=ke(yt,{MenuItem:Ae,MenuItemGroup:De,SubMenu:Te}),wt=ye(Ae);ye(De);const kt=ye(Te),Ot=O({__name:"subAside",props:{isCollapse:Boolean,menu:Object},setup(e){return(n,s)=>{var p,d;const o=kt,t=wt;return(p=e.menu)!=null&&p.children?(k(),V(o,{key:0,index:e.menu.path},{title:F(()=>{var c;return[Y("span",null,ge((c=e.menu)==null?void 0:c.meta.title),1)]}),default:F(()=>[(k(!0),Q(ie,null,nt(e.menu.children,c=>(k(),V(Ot,{key:c,menu:c,isCollapse:e.isCollapse},null,8,["menu","isCollapse"]))),128))]),_:1},8,["index"])):(k(),V(t,{key:1,index:(d=e.menu)==null?void 0:d.path},{default:F(()=>{var c;return[Y("span",null,ge((c=e.menu)==null?void 0:c.meta.title),1)]}),_:1},8,["index"]))}}});export{Dt as E,Ot as _};
